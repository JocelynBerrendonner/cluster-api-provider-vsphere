<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1539px" preserveAspectRatio="none" style="width:3289px;height:1539px;" version="1.1" viewBox="0 0 3289 1539" width="3289px" zoomAndPan="magnify"><defs><filter height="300%" id="f1njk2nj6wamaz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="1619" cy="20" fill="#000000" filter="url(#f1njk2nj6wamaz)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#000000" filter="url(#f1njk2nj6wamaz)" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="3268" x="10" y="50"/><rect fill="#90EE90" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="261.5" y="383.8623"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="26" x="271.5" y="405.4639">CAPI</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="301.5" y="405.165">Cluster</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="54" x="354.5" y="405.4639">controller</text><rect fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="279" x="200.5" y="452.9951"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="210.5" y="474.2979">Cluster</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="206" x="263.5" y="474.5967">controller enqueues a Reconcile call</text><rect fill="#ADD8E6" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="326" x="177" y="642.6055"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="17" x="187" y="664.207">Set</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="238" x="208" y="663.9082">Cluster.Status.InfrastructureReady</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="11" x="450" y="664.207">to</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="28" x="465" y="663.9082">true</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="247.5,594.1279,432.5,594.1279,444.5,606.1279,432.5,618.1279,247.5,618.1279,235.5,606.1279,247.5,594.1279" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="344" y="628.7627">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="247.5" y="610.2852">Is the infrastructure cluster</text><a href="https://github.com/kubernetes-sigs/cluster-api/blob/81cb54579d7d4848d715d0dbeb122c7501026687/controllers/cluster_controller_phases.go#L153-L163" target="_top" xlink:actuate="onRequest" xlink:show="new" xlink:title="https://github.com/kubernetes-sigs/cluster-api/blob/81cb54579d7d4848d715d0dbeb122c7501026687/controllers/cluster_controller_phases.go#L153-L163" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="35" x="397.5" y="610.2852">ready?</text></a><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="340,701.2158,352,713.2158,340,725.2158,328,713.2158,340,701.2158" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#ADD8E6" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="636" x="22" y="808.6934"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="237" x="32" y="830.2949">Copy the infrastructure cluster resource's</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="133" x="273" y="829.9961">status.apiEndpoints</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="45" x="410" y="830.2949">value to</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="189" x="459" y="829.9961">Cluster.Status.APIEndpoints</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="202.5,760.2158,477.5,760.2158,489.5,772.2158,477.5,784.2158,202.5,784.2158,190.5,772.2158,202.5,760.2158" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="344" y="794.8506">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="193" x="202.5" y="776.373">Does the infrastructure cluster have</text><a href="https://github.com/kubernetes-sigs/cluster-api/blob/81cb54579d7d4848d715d0dbeb122c7501026687/controllers/cluster_controller_phases.go#L165-L174" target="_top" xlink:actuate="onRequest" xlink:show="new" xlink:title="https://github.com/kubernetes-sigs/cluster-api/blob/81cb54579d7d4848d715d0dbeb122c7501026687/controllers/cluster_controller_phases.go#L165-L174" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="79" x="398.5" y="776.373">API endpoints?</text></a><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="340,867.3037,352,879.3037,340,891.3037,328,879.3037,340,867.3037" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="340,522.1279,352,534.1279,340,546.1279,328,534.1279,340,522.1279" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="251,939.3037,429,939.3037,441,951.3037,429,963.3037,251,963.3037,239,951.3037,251,939.3037" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="251" y="955.4609">Reconcile returned RequeueError</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="441" y="948.9834">yes</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="274,1011.2588,406,1011.2588,418,1023.2588,406,1035.2588,274,1035.2588,262,1023.2588,274,1011.2588" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="274" y="1027.416">Reconcile returned error</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="244" y="1020.9385">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="418" y="1020.9385">no</text><rect fill="#FFC0CB" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="168.5" y="1045.2588"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="178.5" y="1066.8604">Error reconciling</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="276.5" y="1066.5615">Cluster</text><rect fill="#ADD8E6" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="368.5" y="1045.2588"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="378.5" y="1066.5615">Cluster</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="46" x="431.5" y="1066.8604">is ready</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="340,1085.3916,352,1097.3916,340,1109.3916,328,1097.3916,340,1085.3916" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#90EE90" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="211" x="1009.5" y="286.9961"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="38" x="1019.5" y="308.5977">CABPK</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="1061.5" y="308.2988">KubeadmConfig</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="54" x="1156.5" y="308.5977">controller</text><rect fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="321" x="954.5" y="342.1289"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="964.5" y="363.4316">KubeadmConfig</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="206" x="1059.5" y="363.7305">controller enqueues a Reconcile call</text><rect fill="#ADD8E6" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="830" x="700" y="725.6494"/><a href="https://github.com/kubernetes-sigs/cluster-api-bootstrap-provider-kubeadm/blob/af8eedbeeb919e87799e9600a06a90a60172b9ae/controllers/kubeadmconfig_controller.go#L519-L525" target="_top" xlink:actuate="onRequest" xlink:show="new" xlink:title="https://github.com/kubernetes-sigs/cluster-api-bootstrap-provider-kubeadm/blob/af8eedbeeb919e87799e9600a06a90a60172b9ae/controllers/kubeadmconfig_controller.go#L519-L525" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="154" x="710" y="747.251">Copy the first API endpoint</text></a><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="868" y="747.251">from the</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="921" y="746.9521">Cluster</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="33" x="974" y="747.251">to the</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="1011" y="746.9521">KubeadmConfig</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="59" x="1106" y="747.251">resource's</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="322" x="1169" y="746.9521">Spec.ClusterConfiguration.ControlPlaneEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="25" x="1495" y="747.251">field</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="967,677.1719,1263,677.1719,1275,689.1719,1263,701.1719,967,701.1719,955,689.1719,967,677.1719" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="1119" y="711.8066">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="967" y="693.3291">The</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="990" y="693.0552">Cluster</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="221" x="1042" y="693.3291">resource has one or more API endpoints?</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1115,784.2598,1127,796.2598,1115,808.2598,1103,796.2598,1115,784.2598" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1004,628.6943,1226,628.6943,1238,640.6943,1226,652.6943,1004,652.6943,992,640.6943,1004,628.6943" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="1119" y="663.3291">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="222" x="1004" y="644.8516">Is there a defined control plane endpoint?</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1115,832.7373,1127,844.7373,1115,856.7373,1103,844.7373,1115,832.7373" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1015.5,580.2168,1214.5,580.2168,1226.5,592.2168,1214.5,604.2168,1015.5,604.2168,1003.5,592.2168,1015.5,580.2168" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="1119" y="614.8516">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="29" x="1015.5" y="596.374">Is the</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="1047.5" y="596.1001">Machine</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="115" x="1099.5" y="596.374">a control plane node?</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1115,881.2148,1127,893.2148,1115,905.2148,1103,893.2148,1115,881.2148" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1034,531.7393,1196,531.7393,1208,543.7393,1196,555.7393,1034,555.7393,1022,543.7393,1034,531.7393" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="1119" y="566.374">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="1034" y="547.8965">Is the control plane initialized?</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1115,929.6924,1127,941.6924,1115,953.6924,1103,941.6924,1115,929.6924" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1012,483.2617,1218,483.2617,1230,495.2617,1218,507.2617,1012,507.2617,1000,495.2617,1012,483.2617" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="1119" y="517.8965">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="29" x="1012" y="499.4189">Is the</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="1044" y="499.145">Cluster</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="9" x="1093" y="499.4189">'s</text><a href="https://github.com/kubernetes-sigs/cluster-api/blob/81cb54579d7d4848d715d0dbeb122c7501026687/controllers/cluster_controller_phases.go#L153-L163" target="_top" xlink:actuate="onRequest" xlink:show="new" xlink:title="https://github.com/kubernetes-sigs/cluster-api/blob/81cb54579d7d4848d715d0dbeb122c7501026687/controllers/cluster_controller_phases.go#L153-L163" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="113" x="1105" y="499.4189">infrastructure ready?</text></a><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1115,978.1699,1127,990.1699,1115,1002.1699,1103,990.1699,1115,978.1699" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1115,411.2617,1127,423.2617,1115,435.2617,1103,423.2617,1115,411.2617" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1026,1050.1699,1204,1050.1699,1216,1062.1699,1204,1074.1699,1026,1074.1699,1014,1062.1699,1026,1050.1699" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="1026" y="1066.3271">Reconcile returned RequeueError</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="1216" y="1059.8496">yes</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1049,1122.125,1181,1122.125,1193,1134.125,1181,1146.125,1049,1146.125,1037,1134.125,1049,1122.125" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="1049" y="1138.2822">Reconcile returned error</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="1019" y="1131.8047">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="1193" y="1131.8047">no</text><rect fill="#FFC0CB" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="209" x="908" y="1156.125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="918" y="1177.7266">Error reconciling</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="1016" y="1177.4277">KubeadmConfig</text><rect fill="#ADD8E6" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="161" x="1137" y="1156.125"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="1147" y="1177.4277">KubeadmConfig</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="46" x="1242" y="1177.7266">is ready</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1115,1196.2578,1127,1208.2578,1115,1220.2578,1103,1208.2578,1115,1196.2578" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#90EE90" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="211" x="2095.5" y="76"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="31" x="2105.5" y="97.6016">CAPV</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="2140.5" y="97.3027">VSphereCluster</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="54" x="2242.5" y="97.6016">controller</text><rect fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="328" x="2037" y="130.1328"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="2047" y="151.4355">VSphereCluster</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="206" x="2149" y="151.7344">controller enqueues a Reconcile call</text><path d="M2359.5,218.2656 L2359.5,265.1973 L2339.5,269.1973 L2359.5,273.1973 L2359.5,320.1289 A0,0 0 0 0 2359.5,320.1289 L2807.5,320.1289 A0,0 0 0 0 2807.5,320.1289 L2807.5,228.2656 L2797.5,218.2656 L2359.5,218.2656 A0,0 0 0 0 2359.5,218.2656 " fill="#FBFB77" filter="url(#f1njk2nj6wamaz)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2797.5,218.2656 L2797.5,228.2656 L2807.5,228.2656 L2797.5,218.2656 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="378" x="2365.5" y="235.834">The VSphereCluster controller does not currently deploy any</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="2365.5" y="251.1445">infrastructure, so its</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="2498.5" y="250.8208">Status.Ready</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="2598.5" y="251.1445">value is always</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="2696.5" y="250.8208">true</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="2728.5" y="251.1445">.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="2369.5" y="266.4551"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="2365.5" y="281.7656">This also ensures that the CABPK controller</text><a href="https://github.com/kubernetes-sigs/cluster-api-bootstrap-provider-kubeadm/blob/af8eedbeeb919e87799e9600a06a90a60172b9ae/controllers/kubeadmconfig_controller.go#L133" target="_top" xlink:actuate="onRequest" xlink:show="new" xlink:title="https://github.com/kubernetes-sigs/cluster-api-bootstrap-provider-kubeadm/blob/af8eedbeeb919e87799e9600a06a90a60172b9ae/controllers/kubeadmconfig_controller.go#L133" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="90" x="2641.5" y="281.7656">is not blocked</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="2735.5" y="281.7656">from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="427" x="2365.5" y="297.0762">generating the bootstrap data necessary to unblock the deployment</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="2365.5" y="312.3867">of the initial control plane node for a CAPV cluster.</text><rect fill="#ADD8E6" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="277" x="2062.5" y="252.1309"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="17" x="2072.5" y="273.7324">Set</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="189" x="2093.5" y="273.4336">VSphereCluster.Status.Ready</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="11" x="2286.5" y="273.7324">to</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="28" x="2301.5" y="273.4336">true</text><rect fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="2093" y="389.6064"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="37" x="2103" y="411.208">Define</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="77" x="2144" y="410.9092">APIEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="2225" y="411.208">as a variable</text><rect fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="343" x="2029.5" y="458.7393"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="20" x="2039.5" y="480.3408">Get</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="2063.5" y="480.042">VSphereMachine</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="197" x="2165.5" y="480.3408">control plane resources for cluster</text><rect fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="280" x="2061" y="599.8721"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="104" x="2071" y="621.4736">Get next available</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="2179" y="621.1748">VSphereMachine</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="50" x="2281" y="621.4736">resource</text><path d="M2430.5,669.0049 L2430.5,708.2813 L2410.5,712.2813 L2430.5,716.2813 L2430.5,755.5576 A0,0 0 0 0 2430.5,755.5576 L2881.5,755.5576 A0,0 0 0 0 2881.5,755.5576 L2881.5,679.0049 L2871.5,669.0049 L2430.5,669.0049 A0,0 0 0 0 2430.5,669.0049 " fill="#FBFB77" filter="url(#f1njk2nj6wamaz)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2871.5,669.0049 L2871.5,679.0049 L2881.5,679.0049 L2871.5,669.0049 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="2436.5" y="686.5732">We do</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="2478.5" y="686.5732">not</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="2504.5" y="686.5732">like inspecting the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="2625.5" y="686.2495">KubeadmConfig</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="2733.5" y="686.5732">resource, but we</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="2436.5" y="701.8838">were left with no choice (</text><a href="https://github.com/kubernetes-sigs/cluster-api-provider-vsphere/issues/555" target="_top" xlink:actuate="onRequest" xlink:show="new" xlink:title="https://github.com/kubernetes-sigs/cluster-api-provider-vsphere/issues/555" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="32" x="2594.5" y="701.8838">#555</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2626.5" y="701.8838">).</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="2440.5" y="717.1943"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="430" x="2436.5" y="732.5049">In fact, the linked issue is where we proposed explicitly defining the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="2436.5" y="747.4917">ControlPlaneEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="2600.5" y="747.8154">as part of the CAPI</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="2721.5" y="747.4917">Cluster</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="2781.5" y="747.8154">spec.</text><rect fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="419" x="1991.5" y="695.2148"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="20" x="2001.5" y="716.8164">Get</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="2025.5" y="716.5176">VSphereMachine</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="124" x="2127.5" y="716.8164">resource's associated</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="2255.5" y="716.5176">KubeadmConfig</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="50" x="2350.5" y="716.8164">resource</text><path d="M2768,812.2041 L2768,959.999 L3214,959.999 L3214,822.2041 L3204,812.2041 L2768,812.2041 " fill="#FBFB77" filter="url(#f1njk2nj6wamaz)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3204,812.2041 L3204,822.2041 L3214,822.2041 L3204,812.2041 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="2774" y="829.7725">The concept of a</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="57" x="2883" y="829.7725">preferred</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="2944" y="829.7725">IP address is more in-depth than</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="397" x="2774" y="845.083">can be explained here, but it boils down to specifying the CIDR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="411" x="2774" y="860.3936">of the network segment from which a DHCP server is expected to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="2774" y="875.7041">provide an IP address for the VM.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="2778" y="891.0146"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="414" x="2774" y="906.3252">This allows the specification of multiple network devices and still</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="425" x="2774" y="921.6357">enables the client-side selection of the IP address that was decided</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="14" x="2774" y="936.9463">as</text><a href="https://github.com/vmware/cloud-init-vmware-guestinfo/blob/cb9e8e4790acacb06b1f473565535f6c6f4a595c/DataSourceVMwareGuestInfo.py#L342-L413" target="_top" xlink:actuate="onRequest" xlink:show="new" xlink:title="https://github.com/vmware/cloud-init-vmware-guestinfo/blob/cb9e8e4790acacb06b1f473565535f6c6f4a595c/DataSourceVMwareGuestInfo.py#L342-L413" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="122" x="2792" y="936.9463">the local IP address</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="2918" y="936.9463">by the vSphere GuestInfo cloud-init</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="2774" y="952.2568">datasource.</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="1731.5,815.5576,2182.5,815.5576,2194.5,827.5576,2182.5,839.5576,1731.5,839.5576,1719.5,827.5576,1731.5,815.5576" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="1961" y="850.1924">yes</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="420" x="1731.5" y="831.4409">KubeadmConfig.Spec.ClusterConfiguration.ControlPlaneEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="2154.5" y="831.7148">is set</text><rect fill="#ADD8E6" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="606" x="1654" y="872.5127"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="17" x="1664" y="894.1143">Set</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="77" x="1685" y="893.8154">APIEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="1766" y="894.1143">to value of</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="420" x="1830" y="893.8154">KubeadmConfig.Spec.ClusterConfiguration.ControlPlaneEndpoint</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="2368.5,815.5576,2609.5,815.5576,2621.5,827.5576,2609.5,839.5576,2368.5,839.5576,2356.5,827.5576,2368.5,815.5576" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="2493" y="850.1924">yes</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="98" x="2368.5" y="831.4409">VSphereMachine</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="2469.5" y="831.7148">has a</text><a href="https://github.com/kubernetes-sigs/cluster-api-provider-vsphere/blob/1e0cac1efef081fd8e4c9fd050a9a5b2ba9ba9eb/api/v1alpha2/types.go#L79-L82" target="_top" xlink:actuate="onRequest" xlink:show="new" xlink:title="https://github.com/kubernetes-sigs/cluster-api-provider-vsphere/blob/1e0cac1efef081fd8e4c9fd050a9a5b2ba9ba9eb/api/v1alpha2/types.go#L79-L82" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="109" x="2500.5" y="831.7148">preferred IP address</text></a><rect fill="#ADD8E6" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="418" x="2280" y="872.5127"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="17" x="2290" y="894.1143">Set</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="77" x="2311" y="893.8154">APIEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="2392" y="894.1143">to value of</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="2456" y="893.8154">VSphereMachine</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="134" x="2554" y="894.1143">'s preferred IP address</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="2201,527.8721,2213,539.8721,2201,551.8721,2189,539.8721,2201,527.8721" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="2019.5,1029.6455,2382.5,1029.6455,2394.5,1041.6455,2382.5,1053.6455,2019.5,1053.6455,2007.5,1041.6455,2019.5,1029.6455" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="2019.5" y="1045.5288">APIEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="283" x="2099.5" y="1045.8027">is empty and there is another control plane machine?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="2394.5" y="1039.3252">yes</text><rect fill="#ADD8E6" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="424" x="1989" y="1150.0781"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="17" x="1999" y="1171.6797">Set</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="238" x="2020" y="1171.3809">VSphereCluster.Status.APIEndpoints</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="2262" y="1171.6797">to value of</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="77" x="2326" y="1171.3809">APIEndpoint</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="2147,1101.6006,2255,1101.6006,2267,1113.6006,2255,1125.6006,2147,1125.6006,2135,1113.6006,2147,1101.6006" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="2205" y="1136.2354">yes</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="2147" y="1117.4839">APIEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="2227" y="1117.7578">is set</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="2201,1208.6885,2213,1220.6885,2201,1232.6885,2189,1220.6885,2201,1208.6885" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="2058,341.1289,2344,341.1289,2356,353.1289,2344,365.1289,2058,365.1289,2046,353.1289,2058,341.1289" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="2205" y="375.7637">yes</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="238" x="2058" y="357.0122">VSphereCluster.Status.APIEndpoints</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="2299" y="357.2861">is empty</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="2201,1252.6885,2213,1264.6885,2201,1276.6885,2189,1264.6885,2201,1252.6885" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="2201,184.2656,2213,196.2656,2201,208.2656,2189,196.2656,2201,184.2656" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="2112,1296.6885,2290,1296.6885,2302,1308.6885,2290,1320.6885,2112,1320.6885,2100,1308.6885,2112,1296.6885" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="2112" y="1312.8457">Reconcile returned RequeueError</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="2302" y="1306.3682">yes</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="2135,1361.9639,2267,1361.9639,2279,1373.9639,2267,1385.9639,2135,1385.9639,2123,1373.9639,2135,1361.9639" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="2135" y="1378.1211">Reconcile returned error</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="2105" y="1371.6436">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="2279" y="1371.6436">no</text><rect fill="#FFC0CB" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="1987" y="1395.9639"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="1997" y="1417.5654">Error reconciling</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="2095" y="1417.2666">VSphereCluster</text><rect fill="#ADD8E6" filter="url(#f1njk2nj6wamaz)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="168" x="2223" y="1395.9639"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="2233" y="1417.2666">VSphereCluster</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="46" x="2335" y="1417.5654">is ready</text><polygon fill="#FEFECE" filter="url(#f1njk2nj6wamaz)" points="2201,1436.0967,2213,1448.0967,2201,1460.0967,2189,1448.0967,2201,1436.0967" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#000000" filter="url(#f1njk2nj6wamaz)" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="3268" x="10" y="1480.0967"/><ellipse cx="1619" cy="1517.0967" fill="#FFFFFF" filter="url(#f1njk2nj6wamaz)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="1619" cy="1517.0967" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="417.9951" y2="452.9951"/><polygon fill="#A80036" points="336,442.9951,340,452.9951,344,442.9951,340,446.9951" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="618.1279" y2="642.6055"/><polygon fill="#A80036" points="336,632.6055,340,642.6055,344,632.6055,340,636.6055" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="444.5" x2="513" y1="606.1279" y2="606.1279"/><polygon fill="#A80036" points="509,649.6719,513,659.6719,517,649.6719,513,653.6719" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="513" x2="513" y1="606.1279" y2="713.2158"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="513" x2="352" y1="713.2158" y2="713.2158"/><polygon fill="#A80036" points="362,709.2158,352,713.2158,362,717.2158,358,713.2158" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="676.7383" y2="701.2158"/><polygon fill="#A80036" points="336,691.2158,340,701.2158,344,691.2158,340,695.2158" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="784.2158" y2="808.6934"/><polygon fill="#A80036" points="336,798.6934,340,808.6934,344,798.6934,340,802.6934" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="489.5" x2="668" y1="772.2158" y2="772.2158"/><polygon fill="#A80036" points="664,815.7598,668,825.7598,672,815.7598,668,819.7598" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="668" x2="668" y1="772.2158" y2="879.3037"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="668" x2="352" y1="879.3037" y2="879.3037"/><polygon fill="#A80036" points="362,875.3037,352,879.3037,362,883.3037,358,879.3037" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="842.8262" y2="867.3037"/><polygon fill="#A80036" points="336,857.3037,340,867.3037,344,857.3037,340,861.3037" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="725.2158" y2="760.2158"/><polygon fill="#A80036" points="336,750.2158,340,760.2158,344,750.2158,340,754.2158" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="546.1279" y2="594.1279"/><polygon fill="#A80036" points="336,584.1279,340,594.1279,344,584.1279,340,588.1279" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="441" x2="686" y1="951.3037" y2="951.3037"/><polygon fill="#A80036" points="682,752.7158,686,742.7158,690,752.7158,686,748.7158" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="686" x2="686" y1="534.1279" y2="951.3037"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="686" x2="352" y1="534.1279" y2="534.1279"/><polygon fill="#A80036" points="362,530.1279,352,534.1279,362,538.1279,358,534.1279" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="891.3037" y2="939.3037"/><polygon fill="#A80036" points="336,929.3037,340,939.3037,344,929.3037,340,933.3037" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="487.1279" y2="522.1279"/><polygon fill="#A80036" points="336,512.1279,340,522.1279,344,512.1279,340,516.1279" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="262" x2="252" y1="1023.2588" y2="1023.2588"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="1023.2588" y2="1045.2588"/><polygon fill="#A80036" points="248,1035.2588,252,1045.2588,256,1035.2588,252,1039.2588" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="418" x2="428" y1="1023.2588" y2="1023.2588"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="428" x2="428" y1="1023.2588" y2="1045.2588"/><polygon fill="#A80036" points="424,1035.2588,428,1045.2588,432,1035.2588,428,1039.2588" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="252" y1="1079.3916" y2="1097.3916"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="328" y1="1097.3916" y2="1097.3916"/><polygon fill="#A80036" points="318,1093.3916,328,1097.3916,318,1101.3916,322,1097.3916" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="428" x2="428" y1="1079.3916" y2="1097.3916"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="428" x2="352" y1="1097.3916" y2="1097.3916"/><polygon fill="#A80036" points="362,1093.3916,352,1097.3916,362,1101.3916,358,1097.3916" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="963.3037" y2="1011.2588"/><polygon fill="#A80036" points="336,1001.2588,340,1011.2588,344,1001.2588,340,1005.2588" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="344" y="991.4385">no</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="321.1289" y2="342.1289"/><polygon fill="#A80036" points="1111,332.1289,1115,342.1289,1119,332.1289,1115,336.1289" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="701.1719" y2="725.6494"/><polygon fill="#A80036" points="1111,715.6494,1115,725.6494,1119,715.6494,1115,719.6494" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1275" x2="1540" y1="689.1719" y2="689.1719"/><polygon fill="#A80036" points="1536,732.7158,1540,742.7158,1544,732.7158,1540,736.7158" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1540" x2="1540" y1="689.1719" y2="796.2598"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1540" x2="1127" y1="796.2598" y2="796.2598"/><polygon fill="#A80036" points="1137,792.2598,1127,796.2598,1137,800.2598,1133,796.2598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="759.7822" y2="784.2598"/><polygon fill="#A80036" points="1111,774.2598,1115,784.2598,1119,774.2598,1115,778.2598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="652.6943" y2="677.1719"/><polygon fill="#A80036" points="1111,667.1719,1115,677.1719,1119,667.1719,1115,671.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1238" x2="1558" y1="640.6943" y2="640.6943"/><polygon fill="#A80036" points="1554,732.7158,1558,742.7158,1562,732.7158,1558,736.7158" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1558" x2="1558" y1="640.6943" y2="844.7373"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1558" x2="1127" y1="844.7373" y2="844.7373"/><polygon fill="#A80036" points="1137,840.7373,1127,844.7373,1137,848.7373,1133,844.7373" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="808.2598" y2="832.7373"/><polygon fill="#A80036" points="1111,822.7373,1115,832.7373,1119,822.7373,1115,826.7373" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="604.2168" y2="628.6943"/><polygon fill="#A80036" points="1111,618.6943,1115,628.6943,1119,618.6943,1115,622.6943" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1226.5" x2="1576" y1="592.2168" y2="592.2168"/><polygon fill="#A80036" points="1572,732.7158,1576,742.7158,1580,732.7158,1576,736.7158" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1576" x2="1576" y1="592.2168" y2="893.2148"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1576" x2="1127" y1="893.2148" y2="893.2148"/><polygon fill="#A80036" points="1137,889.2148,1127,893.2148,1137,897.2148,1133,893.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="856.7373" y2="881.2148"/><polygon fill="#A80036" points="1111,871.2148,1115,881.2148,1119,871.2148,1115,875.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="555.7393" y2="580.2168"/><polygon fill="#A80036" points="1111,570.2168,1115,580.2168,1119,570.2168,1115,574.2168" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1208" x2="1594" y1="543.7393" y2="543.7393"/><polygon fill="#A80036" points="1590,732.7158,1594,742.7158,1598,732.7158,1594,736.7158" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1594" x2="1594" y1="543.7393" y2="941.6924"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1594" x2="1127" y1="941.6924" y2="941.6924"/><polygon fill="#A80036" points="1137,937.6924,1127,941.6924,1137,945.6924,1133,941.6924" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="905.2148" y2="929.6924"/><polygon fill="#A80036" points="1111,919.6924,1115,929.6924,1119,919.6924,1115,923.6924" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="507.2617" y2="531.7393"/><polygon fill="#A80036" points="1111,521.7393,1115,531.7393,1119,521.7393,1115,525.7393" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1230" x2="1616" y1="495.2617" y2="495.2617"/><polygon fill="#A80036" points="1612,732.7158,1616,742.7158,1620,732.7158,1616,736.7158" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1616" x2="1616" y1="495.2617" y2="990.1699"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1616" x2="1127" y1="990.1699" y2="990.1699"/><polygon fill="#A80036" points="1137,986.1699,1127,990.1699,1137,994.1699,1133,990.1699" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="953.6924" y2="978.1699"/><polygon fill="#A80036" points="1111,968.1699,1115,978.1699,1119,968.1699,1115,972.1699" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="435.2617" y2="483.2617"/><polygon fill="#A80036" points="1111,473.2617,1115,483.2617,1119,473.2617,1115,477.2617" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1216" x2="1640" y1="1062.1699" y2="1062.1699"/><polygon fill="#A80036" points="1636,752.7158,1640,742.7158,1644,752.7158,1640,748.7158" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1640" x2="1640" y1="423.2617" y2="1062.1699"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1640" x2="1127" y1="423.2617" y2="423.2617"/><polygon fill="#A80036" points="1137,419.2617,1127,423.2617,1137,427.2617,1133,423.2617" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="1002.1699" y2="1050.1699"/><polygon fill="#A80036" points="1111,1040.1699,1115,1050.1699,1119,1040.1699,1115,1044.1699" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="376.2617" y2="411.2617"/><polygon fill="#A80036" points="1111,401.2617,1115,411.2617,1119,401.2617,1115,405.2617" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1037" x2="1012.5" y1="1134.125" y2="1134.125"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1012.5" x2="1012.5" y1="1134.125" y2="1156.125"/><polygon fill="#A80036" points="1008.5,1146.125,1012.5,1156.125,1016.5,1146.125,1012.5,1150.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1193" x2="1217.5" y1="1134.125" y2="1134.125"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1217.5" x2="1217.5" y1="1134.125" y2="1156.125"/><polygon fill="#A80036" points="1213.5,1146.125,1217.5,1156.125,1221.5,1146.125,1217.5,1150.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1012.5" x2="1012.5" y1="1190.2578" y2="1208.2578"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1012.5" x2="1103" y1="1208.2578" y2="1208.2578"/><polygon fill="#A80036" points="1093,1204.2578,1103,1208.2578,1093,1212.2578,1097,1208.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1217.5" x2="1217.5" y1="1190.2578" y2="1208.2578"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1217.5" x2="1127" y1="1208.2578" y2="1208.2578"/><polygon fill="#A80036" points="1137,1204.2578,1127,1208.2578,1137,1212.2578,1133,1208.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="1074.1699" y2="1122.125"/><polygon fill="#A80036" points="1111,1112.125,1115,1122.125,1119,1112.125,1115,1116.125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="1119" y="1102.3047">no</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="110.1328" y2="130.1328"/><polygon fill="#A80036" points="2197,120.1328,2201,130.1328,2205,120.1328,2201,124.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="423.7393" y2="458.7393"/><polygon fill="#A80036" points="2197,448.7393,2201,458.7393,2205,448.7393,2201,452.7393" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="634.0049" y2="695.2148"/><polygon fill="#A80036" points="2197,685.2148,2201,695.2148,2205,685.2148,2201,689.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1957" x2="1957" y1="839.5576" y2="872.5127"/><polygon fill="#A80036" points="1953,862.5127,1957,872.5127,1961,862.5127,1957,866.5127" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1957" x2="1957" y1="906.6455" y2="981.6455"/><polygon fill="#A80036" points="1953,971.6455,1957,981.6455,1961,971.6455,1957,975.6455" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2489" x2="2489" y1="839.5576" y2="872.5127"/><polygon fill="#A80036" points="2485,862.5127,2489,872.5127,2493,862.5127,2489,866.5127" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2489" x2="2489" y1="906.6455" y2="981.6455"/><polygon fill="#A80036" points="2485,971.6455,2489,981.6455,2493,971.6455,2489,975.6455" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2194.5" x2="2356.5" y1="827.5576" y2="827.5576"/><polygon fill="#A80036" points="2346.5,823.5576,2356.5,827.5576,2346.5,831.5576,2350.5,827.5576" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="729.3477" y2="790.5576"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="1957" y1="790.5576" y2="790.5576"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1957" x2="1957" y1="790.5576" y2="815.5576"/><polygon fill="#A80036" points="1953,805.5576,1957,815.5576,1961,805.5576,1957,809.5576" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2621.5" x2="2733" y1="827.5576" y2="827.5576"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2733" x2="2733" y1="827.5576" y2="981.6455"/><polygon fill="#A80036" points="2729,971.6455,2733,981.6455,2737,971.6455,2733,975.6455" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1957" x2="2733" y1="981.6455" y2="981.6455"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="551.8721" y2="599.8721"/><polygon fill="#A80036" points="2197,589.8721,2201,599.8721,2205,589.8721,2201,593.8721" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2394.5" x2="3226" y1="1041.6455" y2="1041.6455"/><polygon fill="#A80036" points="3222,800.7588,3226,790.7588,3230,800.7588,3226,796.7588" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3226" x2="3226" y1="539.8721" y2="1041.6455"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3226" x2="2213" y1="539.8721" y2="539.8721"/><polygon fill="#A80036" points="2223,535.8721,2213,539.8721,2223,543.8721,2219,539.8721" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="981.6455" y2="1029.6455"/><polygon fill="#A80036" points="2197,1019.6455,2201,1029.6455,2205,1019.6455,2201,1023.6455" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="492.8721" y2="527.8721"/><polygon fill="#A80036" points="2197,517.8721,2201,527.8721,2205,517.8721,2201,521.8721" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="1125.6006" y2="1150.0781"/><polygon fill="#A80036" points="2197,1140.0781,2201,1150.0781,2205,1140.0781,2201,1144.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2267" x2="2423" y1="1113.6006" y2="1113.6006"/><polygon fill="#A80036" points="2419,1157.1445,2423,1167.1445,2427,1157.1445,2423,1161.1445" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2423" x2="2423" y1="1113.6006" y2="1220.6885"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2423" x2="2213" y1="1220.6885" y2="1220.6885"/><polygon fill="#A80036" points="2223,1216.6885,2213,1220.6885,2223,1224.6885,2219,1220.6885" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="1184.2109" y2="1208.6885"/><polygon fill="#A80036" points="2197,1198.6885,2201,1208.6885,2205,1198.6885,2201,1202.6885" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="1053.6455" y2="1101.6006"/><polygon fill="#A80036" points="2197,1091.6006,2201,1101.6006,2205,1091.6006,2201,1095.6006" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="2205" y="1081.7803">no</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="365.1289" y2="389.6064"/><polygon fill="#A80036" points="2197,379.6064,2201,389.6064,2205,379.6064,2201,383.6064" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2356" x2="3244" y1="353.1289" y2="353.1289"/><polygon fill="#A80036" points="3240,801.1475,3244,811.1475,3248,801.1475,3244,805.1475" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3244" x2="3244" y1="353.1289" y2="1264.6885"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3244" x2="2213" y1="1264.6885" y2="1264.6885"/><polygon fill="#A80036" points="2223,1260.6885,2213,1264.6885,2223,1268.6885,2219,1264.6885" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="1232.6885" y2="1252.6885"/><polygon fill="#A80036" points="2197,1242.6885,2201,1252.6885,2205,1242.6885,2201,1246.6885" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="286.2637" y2="341.1289"/><polygon fill="#A80036" points="2197,331.1289,2201,341.1289,2205,331.1289,2201,335.1289" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="208.2656" y2="252.1309"/><polygon fill="#A80036" points="2197,242.1309,2201,252.1309,2205,242.1309,2201,246.1309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2302" x2="3262" y1="1308.6885" y2="1308.6885"/><polygon fill="#A80036" points="3258,752.7158,3262,742.7158,3266,752.7158,3262,748.7158" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3262" x2="3262" y1="196.2656" y2="1308.6885"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3262" x2="2213" y1="196.2656" y2="196.2656"/><polygon fill="#A80036" points="2223,192.2656,2213,196.2656,2223,200.2656,2219,196.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="1276.6885" y2="1296.6885"/><polygon fill="#A80036" points="2197,1286.6885,2201,1296.6885,2205,1286.6885,2201,1290.6885" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="164.2656" y2="184.2656"/><polygon fill="#A80036" points="2197,174.2656,2201,184.2656,2205,174.2656,2201,178.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2123" x2="2095" y1="1373.9639" y2="1373.9639"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2095" x2="2095" y1="1373.9639" y2="1395.9639"/><polygon fill="#A80036" points="2091,1385.9639,2095,1395.9639,2099,1385.9639,2095,1389.9639" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2279" x2="2307" y1="1373.9639" y2="1373.9639"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2307" x2="2307" y1="1373.9639" y2="1395.9639"/><polygon fill="#A80036" points="2303,1385.9639,2307,1395.9639,2311,1385.9639,2307,1389.9639" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2095" x2="2095" y1="1430.0967" y2="1448.0967"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2095" x2="2189" y1="1448.0967" y2="1448.0967"/><polygon fill="#A80036" points="2179,1444.0967,2189,1448.0967,2179,1452.0967,2183,1448.0967" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2307" x2="2307" y1="1430.0967" y2="1448.0967"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2307" x2="2213" y1="1448.0967" y2="1448.0967"/><polygon fill="#A80036" points="2223,1444.0967,2213,1448.0967,2223,1452.0967,2219,1448.0967" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="1320.6885" y2="1361.9639"/><polygon fill="#A80036" points="2197,1351.9639,2201,1361.9639,2205,1351.9639,2201,1355.9639" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="2205" y="1342.1436">no</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="56" y2="383.8623"/><polygon fill="#A80036" points="336,373.8623,340,383.8623,344,373.8623,340,377.8623" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="56" y2="286.9961"/><polygon fill="#A80036" points="1111,276.9961,1115,286.9961,1119,276.9961,1115,280.9961" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="56" y2="76"/><polygon fill="#A80036" points="2197,66,2201,76,2205,66,2201,70" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="1109.3916" y2="1480.0967"/><polygon fill="#A80036" points="336,1470.0967,340,1480.0967,344,1470.0967,340,1474.0967" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1115" x2="1115" y1="1220.2578" y2="1480.0967"/><polygon fill="#A80036" points="1111,1470.0967,1115,1480.0967,1119,1470.0967,1115,1474.0967" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2201" x2="2201" y1="1460.0967" y2="1480.0967"/><polygon fill="#A80036" points="2197,1470.0967,2201,1480.0967,2205,1470.0967,2201,1474.0967" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1619" x2="1619" y1="30" y2="50"/><polygon fill="#A80036" points="1615,40,1619,50,1623,40,1619,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1619" x2="1619" y1="1486.0967" y2="1506.0967"/><polygon fill="#A80036" points="1615,1496.0967,1619,1506.0967,1623,1496.0967,1619,1500.0967" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml api-endpoint-discovery


start;

fork
  #LightGreen:CAPI ""Cluster"" controller;
  :""Cluster"" controller enqueues a Reconcile call;
  repeat
    if (Is the infrastructure cluster [[https://github.com/kubernetes-sigs/cluster-api/blob/81cb54579d7d4848d715d0dbeb122c7501026687/controllers/cluster_controller_phases.go#L153-L163 ready?]]) then (yes)
      #LightBlue:Set ""Cluster.Status.InfrastructureReady"" to ""true"";
    endif
    if (Does the infrastructure cluster have [[https://github.com/kubernetes-sigs/cluster-api/blob/81cb54579d7d4848d715d0dbeb122c7501026687/controllers/cluster_controller_phases.go#L165-L174 API endpoints?]]) then (yes)
      #LightBlue:Copy the infrastructure cluster resource's ""status.apiEndpoints"" value to ""Cluster.Status.APIEndpoints"";
    endif
  repeat while (Reconcile returned RequeueError) is (yes)
  -> no;
  if (Reconcile returned error) then (yes)
    #Pink:Error reconciling ""Cluster"";
  else (no)
    #LightBlue:""Cluster"" is ready;
  endif
fork again
  #LightGreen:CABPK ""KubeadmConfig"" controller;
  :""KubeadmConfig"" controller enqueues a Reconcile call;
  repeat
    if (Is the ""Cluster""'s [[https://github.com/kubernetes-sigs/cluster-api/blob/81cb54579d7d4848d715d0dbeb122c7501026687/controllers/cluster_controller_phases.go#L153-L163 infrastructure ready?]]) then (yes)
      if (Is the control plane initialized?) then (no)
        if (Is the ""Machine"" a control plane node?) then (yes)
          if (Is there a defined control plane endpoint?) then (no)
            if (The ""Cluster"" resource has one or more API endpoints?) then (yes)
              #LightBlue:[[https://github.com/kubernetes-sigs/cluster-api-bootstrap-provider-kubeadm/blob/af8eedbeeb919e87799e9600a06a90a60172b9ae/controllers/kubeadmconfig_controller.go#L519-L525 Copy the first API endpoint]] from the ""Cluster"" to the ""KubeadmConfig"" resource's ""Spec.ClusterConfiguration.ControlPlaneEndpoint"" field;
            endif
          endif
        endif
      endif
    endif
  repeat while (Reconcile returned RequeueError) is (yes)
  -> no;
  if (Reconcile returned error) then (yes)
    #Pink:Error reconciling ""KubeadmConfig"";
  else (no)
    #LightBlue:""KubeadmConfig"" is ready;
  endif
fork again
  #LightGreen:CAPV ""VSphereCluster"" controller;
  :""VSphereCluster"" controller enqueues a Reconcile call;
  repeat
    #LightBlue:Set ""VSphereCluster.Status.Ready"" to ""true"";
    note right
      The VSphereCluster controller does not currently deploy any
      infrastructure, so its ""Status.Ready"" value is always ""true"".

      This also ensures that the CABPK controller [[https://github.com/kubernetes-sigs/cluster-api-bootstrap-provider-kubeadm/blob/af8eedbeeb919e87799e9600a06a90a60172b9ae/controllers/kubeadmconfig_controller.go#L133 is not blocked]] from
      generating the bootstrap data necessary to unblock the deployment
      of the initial control plane node for a CAPV cluster.
    end note
    if (""VSphereCluster.Status.APIEndpoints"" is empty) then (yes)
      :Define ""APIEndpoint"" as a variable;
      :Get ""VSphereMachine"" control plane resources for cluster;
      repeat
        :Get next available ""VSphereMachine"" resource;
        :Get ""VSphereMachine"" resource's associated ""KubeadmConfig"" resource;
        note right
          We do **not** like inspecting the ""KubeadmConfig"" resource, but we
          were left with no choice ([[https://github.com/kubernetes-sigs/cluster-api-provider-vsphere/issues/555 #555]]).

          In fact, the linked issue is where we proposed explicitly defining the
          ""ControlPlaneEndpoint"" as part of the CAPI ""Cluster"" spec.
        end note
        if (""KubeadmConfig.Spec.ClusterConfiguration.ControlPlaneEndpoint"" is set) then (yes)
          #LightBlue:Set ""APIEndpoint"" to value of ""KubeadmConfig.Spec.ClusterConfiguration.ControlPlaneEndpoint"";
        else if (""VSphereMachine"" has a [[https://github.com/kubernetes-sigs/cluster-api-provider-vsphere/blob/1e0cac1efef081fd8e4c9fd050a9a5b2ba9ba9eb/api/v1alpha2/types.go#L79-L82 preferred IP address]]) then (yes)
          note right
            The concept of a //preferred// IP address is more in-depth than
            can be explained here, but it boils down to specifying the CIDR
            of the network segment from which a DHCP server is expected to
            provide an IP address for the VM.

            This allows the specification of multiple network devices and still
            enables the client-side selection of the IP address that was decided
            as [[https://github.com/vmware/cloud-init-vmware-guestinfo/blob/cb9e8e4790acacb06b1f473565535f6c6f4a595c/DataSourceVMwareGuestInfo.py#L342-L413 the local IP address]] by the vSphere GuestInfo cloud-init
            datasource.
          end note
          #LightBlue:Set ""APIEndpoint"" to value of ""VSphereMachine""'s preferred IP address;
        endif
      repeat while (""APIEndpoint"" is empty and there is another control plane machine?) is (yes)
      ->no;
      if (""APIEndpoint"" is set) then (yes)
        #LightBlue:Set ""VSphereCluster.Status.APIEndpoints"" to value of ""APIEndpoint"";
      endif
    endif
  repeat while (Reconcile returned RequeueError) is (yes)
  -> no;
  if (Reconcile returned error) then (yes)
    #Pink:Error reconciling ""VSphereCluster"";
  else (no)
    #LightBlue:""VSphereCluster"" is ready;
  endif
end fork
stop;

@enduml

PlantUML version 1.2019.09(Mon Aug 26 11:19:51 CDT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Mac OS X
OS Version: 10.14.6
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>